{{!< centercolumn}}
<div class="offset-md-4 col-md-8 c-profile-edit">
    <div class="card">
        <h1 class="heading-u-red">
            Edit Profile
        </h1>

        <form id="edit-form" enctype="multipart/form-data" method="POST">
            <input type="hidden" name="_csrf" value="{{csrfToken}}">
            {{#if user.email}}
                {{#unless user.mobile_number}}
                    <div class="alert alert-danger" role="alert">
                        Please enter your mobile number to continue.
                    </div>
                {{/unless}}
            {{else}}
                {{#if user.mobile_number}}
                    <div class="alert alert-danger" role="alert">
                        Please enter your email address to continue.
                    </div>
                {{else}}
                    <div class="alert alert-danger" role="alert">
                        Please enter your email address and mobile number to continue.
                    </div>
                {{/if}}
            {{/if}}
            {{>modal_profile_pic}}
            <div class="row justify-content-between align-items-center profile-row">
                <div class="round-img">
                    {{#if userPhoto}}
                        <img class="round-img user-pic" src="{{userPhoto}}">
                    {{else}}
                        <img class="round-img user-pic" src="/img/user.svg">
                    {{/if}}
                </div>

                <div class="button-solid">
                    <button type="button" data-toggle="modal" data-target="#change-dp">CHANGE PROFILE IMAGE</button>
                </div>
            </div>

            {{> error-snippet}}

            <div class="attributes">
                <div class="row no-gutters align-items-center justify-content-between detail-row">
                    <div class="label-input col-2">UserID</div>
                    <input class="input-text col-9" type="text" id="userid" disabled value="{{user.id}}"/>
                </div>

                <div class="row no-gutters align-items-center justify-content-between detail-row">
                    <div class="label-input col-2">Username</div>
                    <input type="text" class="input-text col-9" id="username" disabled value="{{user.username}}"/>
                </div>

                <div class="row no-gutters align-items-center justify-content-between detail-row">
                    <div class="label-input col-2">Firstname</div>
                    <input type="text" id="firstname" class="input-text col-9" name="firstname"
                           value="{{user.firstname}}"/>
                </div>

                <div class="row no-gutters align-items-center justify-content-between detail-row">
                    <div class="label-input col-2">Lastname</div>
                    <input class="input-text col-9" type="text" name="lastname" id="lastname"
                           value="{{user.lastname}}"/>
                </div>

                <div class="row no-gutters align-items-center justify-content-between detail-row">
                    <div class="label-input col-2">Gender</div>
                    <select class="col-9 input-text" name="gender" id="gender">
                        <option value="MALE" {{#ifeq expected='MALE' val=user.gender}}
                                selected
                        {{/ifeq}}>MALE
                        </option>
                        <option value="FEMALE"{{#ifeq expected='FEMALE' val=user.gender}}
                                selected
                        {{/ifeq}}>FEMALE
                        </option>
                        <option value="UNDISCLOSED" {{#ifeq expected='UNDISCLOSED' val=user.gender}}
                                selected
                        {{/ifeq}}>UNDISCLOSED
                        </option>
                    </select>
                </div>

                <div class="row no-gutters align-items-center justify-content-between detail-row">
                    <div class="label-input col-2">Your T-shirt Size</div>
                    <select class="col-9 input-text" name="apparelGoodiesSize" id="apparelGoodiesSize">
                        <option value="" {{#ifeq expected='' val=user.apparelGoodiesSize}}
                                selected={{true}}
                        {{/ifeq}}>Choose your fit
                        </option>
                        <option value="S" {{#ifeq expected='S' val=user.apparelGoodiesSize}}
                                selected
                        {{/ifeq}}>S - Small
                        </option>
                        <option value="M" {{#ifeq expected='M' val=user.apparelGoodiesSize}}
                                selected
                        {{/ifeq}}>M - Medium
                        </option>
                        <option value="L" {{#ifeq expected='L' val=user.apparelGoodiesSize}}
                                selected
                        {{/ifeq}}>L - Large
                        </option>
                        <option value="XL" {{#ifeq expected='XL' val=user.apparelGoodiesSize}}
                                selected
                        {{/ifeq}}>XL - Extra Large
                        </option>
                    </select>
                </div>

                <div class="row no-gutters align-items-center justify-content-between detail-row">
                    <div class="label-input col-2">Email</div>
                    {{#if user.verifiedemail}}
                        <input type="text" id="email" name="email" class="input-text col-9" disabled
                               value="{{user.email}}"/>
                    {{else}}
                        <input type="text" id="email" name="email" class="input-text col-9" value="{{user.email}}"/>
                    {{/if}}
                </div>

                <div class="row no-gutters align-items-center justify-content-between detail-row">
                    <div class="label-input col-2">Contact Number</div>
                    <select name="dial_code" class="input-text col-3">
                        {{#each countries}}
                            {{#ifeq expected=dial_code val=../user.dial_code}}
                                <option class="dropdown-li" value="{{dial_code}}" selected>
                                    {{name}} ({{dial_code}})
                                </option>
                            {{else}}
                                <option class="dropdown-li" value="{{dial_code}}">
                                    {{name}} ({{dial_code}})
                                </option>
                            {{/ifeq}}
                        {{/each}}
                    </select>

                    <input class="input-text col-5" type="text" name="mobile_number" id="mobile_number"
                           value="{{user.mobile_number}}"/>
                </div>

                <div class="row no-gutters align-items-center justify-content-between detail-row">
                    <div class="label-input col-2">Whatsapp Number</div>
                    <select name="dial_code" class="input-text col-3">
                        {{#each countries}}
                            {{#ifeq expected=dial_code val=../user.dial_code}}
                                <option class="dropdown-li" value="{{dial_code}}" selected>
                                    {{name}} ({{dial_code}})
                                </option>
                            {{else}}
                                <option class="dropdown-li" value="{{dial_code}}">
                                    {{name}} ({{dial_code}})
                                </option>
                            {{/ifeq}}
                        {{/each}}
                    </select>

                    <input class="input-text col-5" type="text" name="whatsapp_number" id="whatsapp_number"
                           value="{{user.whatsapp_number}}"/>
                </div>


                <div class="row no-gutters align-items-center justify-content-between detail-row">
                    <div class="label-input col-2">Password</div>
                    <input class="input-text col-9" type="password" name="password"
                           placeholder="Enter Password (keep empty for unchanged)" id="password"/>
                </div>

                <div class="row no-gutters align-items-center justify-content-between detail-row">
                    <div class="label-input col-2">Re-Enter</div>
                    <input class="input-text col-9" type="password" name="repassword" placeholder="Re-Enter Password"
                           id="repassword"/>
                </div>

                <div class="row no-gutters align-items-center justify-content-between detail-row">
                    <div class="label-input col-2">College</div>
                    <select name="collegeId" class="input-text col-9">
                        {{#each colleges}}
                            {{#ifeq expected=id val=../user.demographic.collegeId}}
                                <option class="dropdown-li" value="{{id}}" selected>{{name}}</option>
                            {{/ifeq}}
                            {{#ifneq expected=id val=../user.demographic.collegeId}}
                                <option class="dropdown-li" value="{{id}}">{{name}}</option>
                            {{/ifneq}}
                        {{/each}}
                    </select>
                </div>

                <div class="row no-gutters align-items-center justify-content-between detail-row">
                    <div class="label-input col-2">Branch</div>
                    <select name="branchId" class="input-text col-9">
                        {{#each branches}}
                            {{#ifeq expected=id val=../user.demographic.branchId}}
                                <option class="dropdown-li" value="{{id}}" selected>{{name}}</option>
                            {{/ifeq}}
                            {{#ifneq expected=id val=../user.demographic.branchId}}
                                <option class="dropdown-li" value="{{id}}">{{name}}</option>
                            {{/ifneq}}
                        {{/each}}
                    </select>
                </div>

                <div class="row no-gutters align-items-center justify-content-between detail-row">
                    <div class="label-input col-2">Graduation Year</div>
                    <select name="gradYear" class="input-text col-9" required>
                        {{#each gradYears}}
                            {{#ifeq expected=this val=../user.graduationYear}}
                                <option class="dropdown-li" value="{{this}}" selected>{{this}}</option>
                            {{else}}
                                <option class="dropdown-li" value="{{this}}">{{this}}</option>
                            {{/ifeq}}
                        {{/each}}
                    </select>
                </div>

                <div class="flex-row justify-content-end button-div">
                    <div class="reset-button">
                        <button type="reset">RESET</button>
                    </div>
                    <div class="button-solid">
                        <button type="submit">SAVE CHANGES</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
